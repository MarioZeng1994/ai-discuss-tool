# AI 協作流程控制器 v2（WIP）

`v2/AI討論工具_v2_WIP.py` 是正在重構中的 v2 版 GUI 工具。
它的定位不是自動幫你寫程式，而是把多個 AI CLI 視窗的協作流程固定下來，降低貼錯指令、走錯步驟、忘記備份的機率。

## 目前程式已經有的功能

- 三窗口主流程：A 架構師 / B 審查員 / C 執行者
- D 秘書角色：用白話幫業主翻譯與引導
- 多專案管理
- 專案結構預覽與自動補建
- 一鍵產生 CLI 啟動指令
- 一鍵產生 A / B / C / D 開場指令
- `完整模式`（A -> B -> C）與 `快速模式`（直接給 C）
- 輪次歷史紀錄
- 完成一輪後自動備份
- 主題與結尾規則設定

## 介面結構

程式目前固定三個 Tab：

1. `初始設定`
2. `啟動窗口`
3. `工作流程`

工作方式是：

- 先建立專案資料夾與核心文件
- 再開 AI CLI 視窗
- 再把對應角色的開場指令貼進去
- 最後用工作流程頁面逐步引導每一輪任務

## 安裝與執行

在 repo 根目錄執行：

```bash
pip install -r requirements.txt
python v2/AI討論工具_v2_WIP.py
```

目前 `requirements.txt`：

- `ttkbootstrap`
- `pillow`

另外，你必須先在自己的電腦安裝至少一種 AI CLI：

- Copilot CLI
- Claude CLI
- Codex CLI

程式只會幫你產生與複製指令，不會替你安裝這些工具。

## 專案建立後會自動產生什麼？

資料夾：

- `_共用文件`
- `_窗口A_規劃`
- `_窗口A_規劃/歷史`
- `_窗口B_審查`
- `_窗口C_執行`
- `_共識`

核心文件：

- `_共用文件/CLAUDE.md`
- `_共用文件/AGENTS.md`
- `_共用文件/AI_常見錯誤備忘.md`
- `_共用文件/AI_執行前核對清單.md`
- `_共用文件/DECISIONS.md`
- `_共用文件/PROJECT_STATE.md`
- `_共識/CONSENSUS.md`

建立邏輯是「只補缺的，不覆蓋已存在檔案」。

## 角色提示詞的實際設計

目前程式內建四套開場模板：

- A：先做任務分割與評估，再寫 `SPEC_本輪.md`
- B：只審查 `SPEC_本輪.md`，不碰原始碼
- C：先做執行前確認，等使用者說「可以開始」才動手
- D：只負責翻譯 A / B / C 的話

每個角色都可選：

- `Claude/Copilot`
- `Codex`

差異只在記憶檔：

- `Claude/Copilot` 版本讀 `CLAUDE.md`
- `Codex` 版本讀 `AGENTS.md`

## 工作流程（依照目前程式）

### 完整模式

1. Step 1：輸入需求
2. Step 2：貼到窗口 A
3. Step 3：貼到窗口 B
4. Step 4：確認審查結果
5. Step 5：貼到窗口 C
6. Step 6：驗收

### 快速模式

1. Step 1：輸入需求
2. Step 2 / 3：直接貼到窗口 C
3. Step 3 / 3：驗收

### 驗收完成後

按下「全部通過」後，程式會：

- 寫入輪次歷史
- 輪次加 1
- 更新 `PROJECT_STATE.md`
- 自動備份到 `專案路徑/_備份/時間戳`

## 目前內建的 CLI 指令支援

GUI 內建提供三組常用指令清單：

- Copilot
- Claude
- Codex

你按按鈕後，會跳出指令挑選視窗；選完後，畫面會組成：

```text
cd "代碼資料夾"
<選到的指令>
```

也支援 `自訂指令`，可手動編輯指令框內容再複製。

## 目前要注意的行為與限制

1. 這是 WIP 版，介面、模板、文案仍可能變動
2. 設定檔固定存到桌面：`AI流程控制器_config.json`
3. 開場提示詞內的共用文件路徑目前固定寫成 `../_共用文件`
4. 圖表 / CSS 規格核對會引用像 `圓餅_環形圖規格卡.md`、`字體大小規格卡.md` 的檔案；這些檔案不會自動建立，需自行放進 `_共用文件`
5. `C 額外讀檔` 會直接附加到 C 的開場提示詞，請填實際存在且值得先讀的檔案
6. 這個工具不會替你開終端機，也不會直接呼叫任何 AI API；它是流程控制器

## 適合誰？

適合這幾種情境：

- 你想把 AI 協作拆成規劃 / 審查 / 執行三個角色
- 你常常忘記該先給誰看、該貼什麼
- 你需要保留每一輪的歷史與備份
- 你想讓不懂程式的人也能照步驟操作

## 快速開始建議

1. 先建立專案結構
2. 用初始化指令讓 AI 補強核心文件
3. 開 1 到 3 個 AI CLI 視窗
4. 先跑一次完整模式
5. 小修補再用快速模式

穩定版的文案與功能，之後應以主分支與正式發布內容為準。
