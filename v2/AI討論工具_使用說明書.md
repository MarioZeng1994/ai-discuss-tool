# AI 協作流程控制器 v2 使用說明書

> 這份文件是給第一次接觸這個工具的人。
> 你不需要先懂程式，只要照著畫面步驟做。

## 這個工具是做什麼的？

這個工具本身不會直接幫你寫程式。
它的作用是把「多個 AI 視窗一起協作」這件事固定成一套流程，並幫你：

- 建立專案資料夾與核心文件
- 產生 AI CLI 啟動指令
- 產生 A / B / C / D 四種角色的開場指令
- 用 Step 1 到 Step 6 引導你把需求依序貼給不同 AI
- 自動記錄輪次歷史並備份專案文件

目前主流程是三個工作角色：

- A（架構師）：拆需求、分輪、寫規格書
- B（審查員）：只審查規格書，不碰程式碼
- C（執行者）：照共識修改程式碼
- D（秘書，可選）：只負責翻譯和引導，不改程式

## 開始前要準備什麼？

你需要先準備好這些東西：

1. 安裝 Python 3
2. 在專案根目錄執行：

```bash
pip install -r requirements.txt
```

3. 至少安裝一個 AI CLI 工具（Copilot / Claude / Codex 任一個）
4. 你的實際程式碼專案資料夾

目前 `requirements.txt` 只有兩個套件：

- `ttkbootstrap`
- `pillow`

## 怎麼啟動？

在 repo 根目錄執行：

```bash
python v2/AI討論工具_v2_WIP.py
```

程式啟動後，設定檔會存到桌面：

```text
Desktop/AI流程控制器_config.json
```

這份設定檔會記住：

- 已建立的專案
- 上次選到哪個專案
- 主題
- 結尾規則
- 每個專案的輪次、共用檔案、CLI 預設指令

## 介面怎麼看？

畫面主要分成三個 Tab：

1. `初始設定`
2. `啟動窗口`
3. `工作流程`

右上角還有：

- 專案下拉選單
- `+ 新建專案`
- `⚙ 設定`

## Tab 1：初始設定

這個分頁有兩個用途：

1. 建立專案結構
2. 產生「初始化指令」給 AI 幫你補齊設定文件

### Step 1：建立專案結構

你會看到這些欄位：

- `專案名稱`
- `專案路徑`
- `代碼資料夾`
- `共用規格檔`
- `C 額外讀檔`

如果你把使用者程度選成「完全不懂代碼」，技術欄位會自動隱藏，程式會改用比較簡單的預設值。

你可以先按 `預覽專案結構` 看目前缺哪些資料夾和檔案，再按 `Step 1：建立專案結構`。

程式的建立規則是：

- 只建立缺少的項目
- 已存在的資料夾或文件不會被覆蓋

建立後會自動產生這些資料夾：

- `_共用文件`
- `_窗口A_規劃`
- `_窗口A_規劃/歷史`
- `_窗口B_審查`
- `_窗口C_執行`
- `_共識`

也會自動建立這些核心文件：

- `_共用文件/CLAUDE.md`
- `_共用文件/AGENTS.md`
- `_共用文件/AI_常見錯誤備忘.md`
- `_共用文件/AI_執行前核對清單.md`
- `_共用文件/DECISIONS.md`
- `_共用文件/PROJECT_STATE.md`
- `_共識/CONSENSUS.md`

這些文件的用途很簡單：

- `CLAUDE.md` / `AGENTS.md`：AI 的長期背景與工作規則
- `AI_常見錯誤備忘.md`：以前踩過的坑
- `AI_執行前核對清單.md`：C 開工前要先檢查什麼
- `DECISIONS.md`：專案的重要決策
- `PROJECT_STATE.md`：目前輪次、進度、歷史未完成項
- `CONSENSUS.md`：A 與 B 通過後的最終共識

### Step 2：讓 AI 幫你客製化設定檔

這一步是把上面自動建立的「空白骨架」補成可用內容。

操作順序：

1. 選 `你的程度`
2. 選 `專案類型`
3. 用白話描述你的專案
4. 按 `產生初始化指令（預覽）`
5. 確認預覽內容
6. 按 `複製上方指令到剪貼簿`
7. 把這段指令貼到任一個 AI CLI 視窗

AI 會依照你的描述，補強這些檔案：

- `CLAUDE.md`
- `AGENTS.md`
- `AI_常見錯誤備忘.md`
- `AI_執行前核對清單.md`
- `DECISIONS.md`

## Tab 2：啟動窗口

這個分頁分成兩步。

### Step 1：啟動 CLI

你可以點：

- `Copilot`
- `Claude`
- `Codex`
- `自訂指令`

如果點前三個按鈕，程式會跳出該工具的常用指令清單，讓你挑一條。
選定後，畫面會自動產生像這樣的內容：

```text
cd "你的代碼資料夾"
<你選的 CLI 指令>
```

你要做的事只有兩個：

1. 按 `複製 CLI 啟動指令`
2. 到終端機貼上並執行

注意：這個工具只負責產生與複製指令，不會替你直接開終端機。

### Step 2：產生 A / B / C / D 開場指令

這裡有四個角色按鈕：

- `A（架構師）`
- `B（審查員）`
- `C（執行者）`
- `D（秘書）`

每個角色下面都有一個下拉選單，可選：

- `Claude/Copilot`
- `Codex`

這個選項的差別是：

- 選 `Claude/Copilot`：開場指令會要求 AI 讀 `CLAUDE.md`
- 選 `Codex`：開場指令會要求 AI 讀 `AGENTS.md`

你按角色按鈕後，右側文字區會產生對應角色的完整開場指令。
接著按 `複製開場指令`，貼到對應的 AI 視窗即可。

補充說明：

- A 會先做任務分割與風險評估，再寫 `SPEC_本輪.md`
- B 只審查 `SPEC_本輪.md`
- C 會先做「執行前確認」，你說「可以開始」才動程式
- D 是翻譯助手，不是工程師

## Tab 3：工作流程

這是你每天最常用的地方。

### Step 1：輸入需求

你可以先選：

- `本輪性質`：功能新增 / 功能優化 / Bug修復 / 新模板開發 / 樣式調整
- `模式`：完整模式 或 快速模式
- `本輪包含圖表 / CSS 視覺修改`

也可以用兩個快捷按鈕：

- `插入需求模板`
- `插入問題回報模板`

#### 什麼時候用完整模式？

適合：

- 多項需求
- 會改到多個檔案
- 需要先規劃再動手的任務

完整模式會走 6 步：

1. 你輸入需求
2. 貼給 A
3. 貼給 B
4. 確認審查結果
5. 貼給 C
6. 驗收

#### 什麼時候用快速模式？

適合：

- 1 到 3 個小修改
- 不需要 A/B 先規劃

快速模式只走 3 步：

1. 你輸入需求
2. 直接貼給 C
3. 驗收

### 完整模式實際怎麼走？

#### Step 2：貼到窗口 A

程式會把你的需求包成一段提示，要求 A：

- 先拆解需求
- 做表格分析
- 建議本輪 / 下輪 / 暫緩項目
- 提醒風險

A 會先做任務評估，不是立刻寫規格書。

#### Step 3：貼到窗口 B

當 A 完成 `SPEC_本輪.md` 後，把系統產生的簡短指令貼給 B。
B 的工作是審查規格書是否足夠讓工程師安全執行。

#### Step 4：確認審查結果

如果 B 提出必須修改：

- 按 `需要修改 → 複製修改指示回 A`
- 讓 A 修完後，再回到 B 重審

如果 B 通過：

- 先讓 A 把最終版規格同步到 `_共識/CONSENSUS.md`
- 再按 `審查 OK → 前往 Step 5`

#### Step 5：貼到窗口 C

這一步會要求 C：

- 先做執行前確認
- 列出準備修改的函式、行號、內容
- 列出不確定點
- 等你說「可以開始」才動手

如果你在 Step 1 勾了「圖表 / CSS 視覺修改」，這裡會自動附加更嚴格的規格核對要求。

#### Step 6：驗收

你要依照 C 產生的這份文件去測：

```text
_窗口C_執行/操作清單_本輪.md
```

驗收後有三個選擇：

- `有問題 — 複製回報給 C（舊視窗）`
- `圖表問題 — 開新 C 視窗`
- `全部通過 — 本輪完成`

其中「圖表問題 — 開新 C 視窗」的設計，是避免舊對話太長，讓新 C 視窗重新專注在規格上。

## 完成一輪後會發生什麼？

當你按下 `全部通過 — 本輪完成`，程式會自動做四件事：

1. 把本輪需求、類型、模式、完成時間寫進歷史紀錄
2. 將輪次加 1
3. 更新 `_共用文件/PROJECT_STATE.md`
4. 自動備份專案文件

自動備份位置是：

```text
專案路徑/_備份/YYYY-MM-DD_HHMM/
```

備份內容包含：

- `_共用文件`
- `_窗口A_規劃`
- `_窗口B_審查`
- `_窗口C_執行`
- `_共識`

## 歷史紀錄、備份、設定

### 歷史紀錄

在 `工作流程` Tab 右上角按 `歷史紀錄`，可以看到每一輪的：

- 輪次
- 完成時間
- 本輪性質
- 使用模式
- 需求摘要

### 設定

右上角 `⚙ 設定` 可以做這些事：

- 更換主題
- 修改 `結尾規則`
- 編輯專案設定
- 手動備份專案文件
- 從列表移除專案（不刪實體檔案）

其中 `結尾規則` 會被自動加到所有角色的開場指令裡。
例如你把它設成「每次回覆結尾都要確認下一步」，A/B/C/D 都會收到同一條規則。

### 編輯專案設定

你可以直接改：

- 專案路徑
- 代碼資料夾
- 當前輪次
- 共用規格檔
- C 額外讀檔

這很適合用在：

- 專案搬家了
- 想多加幾份規格書給 A 讀
- 想指定 C 額外先讀某個程式檔

## 建議怎麼用？

如果你是第一次用，建議照這個順序：

1. 在 `初始設定` 建立專案結構
2. 產生初始化指令，先讓 AI 補強核心文件
3. 到 `啟動窗口` 開一個 AI CLI 視窗
4. 先跑一次完整模式
5. 任務很小時，再改用快速模式

比較穩的角色分工是：

- A：規劃
- B：挑錯
- C：實作
- D：只在你看不懂時才開

## 目前版本的重要注意事項

這一版是 `WIP`（開發中版本），請把它當成可用中的草稿版。

目前有幾件事你要知道：

1. 開場指令裡的共用文件路徑是固定寫成 `../_共用文件`
2. 如果你的資料夾結構很特殊，可能需要自行調整專案設定或提示詞
3. 勾選圖表 / CSS 規格核對時，提示詞會引用像 `圓餅_環形圖規格卡.md`、`字體大小規格卡.md` 這類文件；這些檔案不會自動建立，請自行放進 `_共用文件`
4. `自訂指令` 只是讓你手動編輯 CLI 文字框，程式不會幫你檢查那條指令能不能執行
5. 這個工具不會自動開 AI、也不會直接改你的程式碼；它是流程控制器，不是自動代理

## 一句話總結

把它當成「AI 協作的流程面板」就對了。
你負責決定需求與驗收，工具負責幫你整理流程，AI 負責規劃、審查、執行。
